  - name: Setup Node.js environment
    uses: actions/setup-node@v2
    with:
      node-version: '16.x'

  - name: npm install and build webpack
    run: |
      npm install
      npm run build

  - uses: actions/upload-artifact@v3
    with:
      name: webpack artifacts
      path: public/


name: Stage the app

on:
  pull_request:
    types: [labeled]

jobs:
  build:
    runs-on: ubuntu-latest

    if: contains(github.event.pull_request.labels.*.name, 'stage')
